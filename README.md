# 정책지원금 통합서비스

## 📘 소개

**정책지원금 통합서비스**는 한국 정부 및 공공기관의 다양한 **정책 지원금(복지, 보조금 등)** 정보를 통합적으로 수집, 분류, 조회 및 추천하는 시스템입니다.
이 서비스는 **공공데이터포털 API**와 **웹 크롤링**을 통해 정책 데이터를 수집하고, **NLP 기반 카테고리 분류 모델**을 활용하여 정책 정보를 자동으로 정리합니다.

사용자는 본 서비스를 통해 본인의 상황(예: 저소득층, 청년, 임산부 등)에 맞는 **맞춤형 정책**을 쉽게 조회할 수 있습니다.

---

## ⚙️ 주요 기능

* **데이터 수집**
  * 공공데이터포털 API, MCP, 정부·지자체·기업 웹사이트에서 자동으로 정책 데이터 수집.
  * XML 및 JSON 파싱을 통해 DB로 통합 저장.
    
* **정책 분류**
  * **키워드 기반**: 사전 정의된 키워드(예: "임신" → 임신 카테고리)로 빠른 분류.
  * **NLP 기반**: GPT-OSS, Gemini CLI, GPT-4 mini 모델을 활용해 문맥 기반 다중 카테고리 분류.
    
* **카테고리 시스템**
  * 총 **27개 복지 카테고리 트리 구조**:
    * 연령별: 임신·출산, 영유아, 아동, 청소년, 노인
    * 사회계층별: 저소득층, 장애인, 농어민, 다문화가정 등
    * 지원유형별: 주거, 생활지원, 교육, 금융, 건강, 안전, 고용 등
    
* **조회 및 추천**
  * 사용자 입력(나이, 소득, 재산, 가족 구성 등)에 따라 정책을 맞춤형으로 추천.
  * 예시:

    * 입력: `소득 100, 나이 25`
    * 출력: 청년·저소득 관련 정책 리스트
      
* **예시 분류**
  * 입력: “개발제한구역 지정으로 생활의 불편을 겪는 구역 내 저소득 주민에게 생활비를 보조합니다.”
    → 출력: `저소득, 생활지원`
  * 입력: “가정 밖 청소년 보호 및 상담 지원”
    → 출력: `청소년, 정신건강, 생활지원, 주거, 교육`

---

## 🧠 기술 스택

| 구분           | 사용 기술                                                                             |
| ------------ | --------------------------------------------------------------------------------- |
| **언어**       | Python                                                                            |
| **주요 라이브러리** | FastApi (API), BeautifulSoup (크롤링), openai / ollama (NLP), MySQL (DB) |
| **NLP 모델**   | GPT-OSS (Apache 2.0)                     |
| **환경/도구**    | Ollama (로컬 모델 호스팅), Cursor Agent Prompt (분류 프롬프트 실행)                              |
| **데이터 처리**   | XML/JSON 파싱, 데이터 흐름: `외부 API → NLP 분류 → DB → FastAPI -> 사용자`                                 |


## 🧮 텍스트 기반 분류 알고리즘 상세

텍스트 기반 분류(Text-based Classification)는 규칙과 키워드 매칭을 이용하여 정책 문서를 빠르게 카테고리화하는 방식입니다.
이 방법은 **속도가 빠르고 구현이 간단**하다는 장점이 있으며, NLP 모델이 없는 환경에서도 안정적으로 동작합니다.

---

### 1️⃣ 분류 원리

* 미리 정의된 **카테고리별 키워드 목록**을 기반으로 입력 텍스트 내에 포함된 단어를 탐색합니다.
* 매칭되는 키워드가 발견되면 해당 카테고리를 부여하며, 다수의 키워드가 매칭될 경우 **가중치(weight)**를 부여하여 우선순위를 결정합니다.
* 복수 카테고리가 매칭되면 **쉼표(,)** 로 구분하여 다중 카테고리로 출력합니다.

예:

| 입력 문장                | 매칭 키워드  | 결과        |
| -------------------- | ------- | --------- |
| "저소득 가정을 위한 주거비 지원"  | 저소득, 주거 | 저소득층, 주거  |
| "임신 중 여성 건강검진 비용 지원" | 임신, 건강  | 임신·출산, 건강 |

---

### 2️⃣ 분류 절차 (로직 흐름)

1. **전처리**

   * 텍스트 소문자화 및 불용어(stopword) 제거.
   * 조사/어미(은,는,이,가,을,를 등) 제거로 핵심 단어만 남김.

2. **키워드 매칭**

   * 카테고리별 키워드 사전(`category_keywords.txt`)을 참조.
   * 예:

     ```json
     {
       "임신·출산": ["임신", "출산", "육아휴직", "출산비"],
       "청소년": ["청소년", "학생", "학교밖"],
       "저소득층": ["저소득", "기초생활", "차상위"]
     }
     ```

3. **가중치 계산**

   * 등장 횟수, 중요도, 문장 내 위치 등을 기반으로 카테고리별 점수를 계산.
   * 예: `점수 = (등장횟수 × 키워드 가중치)`

4. **결과 출력**

   * 점수가 높은 상위 1~3개 카테고리를 반환.
   * 매칭이 없을 경우 `기타`로 분류.

---

### 3️⃣ 장점과 단점

| 항목    | 장점             | 단점                 |
| ----- | -------------- | ------------------ |
| 속도    | 빠름 (O(n))      | 문맥 오판 가능           |
| 유지보수  | 단순한 사전 구조      | 키워드 업데이트 필요        |
| 정확도   | 규칙이 명확한 문장에 강함 | 비정형 문장, 은유 표현에 약함  |
| 적용 사례 | 법령, 공문서, 제목    | 설명문, 서술형 텍스트에는 부적합 |

---

### 4️⃣ 예시 코드 (Python 의사코드)

```python
def classify_text(text, category_keywords):
    scores = {category: 0 for category in category_keywords}

    for category, keywords in category_keywords.items():
        for kw in keywords:
            if kw in text:
                scores[category] += 1

    top_categories = sorted(scores, key=scores.get, reverse=True)
    result = [cat for cat in top_categories if scores[cat] > 0]
    return result or ["기타"]
```

---

### 5️⃣ 예시 실행 결과

입력:

```
"기초생활수급자 가정의 주거 환경을 개선하는 지원사업입니다."
```

출력:

```
저소득층, 주거
```

입력:

```
"학교 밖 청소년을 위한 직업훈련 및 문화활동 지원"
```

출력:

```
청소년, 교육, 문화지원
```

**요약:**
텍스트 기반 분류는 규칙적이고 예측 가능한 분류에 강하며, NLP와 결합하여 보완적으로 사용될 때 가장 효과적입니다.
본 프로젝트에서는 이를 **정책 데이터 전처리 단계**에서 활용해 NLP 연산량을 줄이고, 전체 분류 속도를 개선했습니다.

---

### NLP 모델 설정

* Ollama 설치: [https://ollama.ai](https://ollama.ai)
* GPT-OSS 모델 다운로드 및 로컬 실행
* 공공데이터포털 API 키 등록 (환경변수 또는 config.json 사용)

---
## 🧩 NLP 분류 알고리즘 상세

### 원리
NLP 모델은 문장의 **의미와 문맥을 이해**하여 카테고리를 자동으로 결정합니다.
* 표현이 달라도 의미가 같으면 동일한 카테고리로 분류.
* 같은 단어라도 문맥이 다르면 다른 카테고리로 구분.

### 장점
* 문장 표현 다양성에 강함.
* 복잡한 의미 구조 처리 가능.
* 유지보수 부담 적음.

### 단점
* 학습 데이터 품질에 따라 정확도 차이.
* 처리 속도는 규칙 기반보다 느릴 수 있음.

### 모델 구성
* **GPT-OSS**: 로컬에서 실행 가능한 오픈소스 GPT 모델.

---

## 🧾 [분류 프롬프트](https://github.com/RealSan1/SocialWelfare/blob/main/NLP/prompt.txt)

```
당신은 한국 복지 제도의 카테고리를 분류하는 전문 모델입니다.
카테고리 목록: 임신·출산·영유아, 아동, 청소년, 노인, 저소득층, 장애인, 농어민, 기타

규칙:
1. 텍스트를 읽고 가장 적절한 복지 카테고리를 판단합니다.
2. 복수 분류는 쉼표(,)로 구분합니다.
3. 지정된 카테고리 외 단어나 설명은 포함하지 않습니다.
4. 분류가 어렵다면 '기타'로 출력합니다.

입력: "저소득 가정을 위한 주거비 지원"  
출력: 저소득층, 주거
```

---

## 📊 텍스트 기반 vs. NLP 기반 비교

| 구분    | 텍스트 기반     | NLP 기반         |
| ----- | ---------- | -------------- |
| 원리    | 키워드 매칭     | 의미·문맥 이해       |
| 장점    | 빠름, 간단함    | 문맥 대응, 다중 카테고리 |
| 단점    | 표현 다양성에 약함 | 속도 느림, 학습 필요   |
| 사용 사례 | 법령, 안내문    | 일반 정책 설명, 민원문  |

---

## 📚 실제 분류 예시

| 입력 텍스트                          | 텍스트 기반 결과 | NLP 결과                      |
| ------------------------------- | --------- | --------------------------- |
| 가정 밖 청소년을 보호하고 상담, 교육활동을 지원합니다. | 청소년       | 청소년, 정신건강, 주거, 교육, 안전, 생활지원 |

---


